<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>YQ Assessment • YQzuoye</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="YQ Assessment">
<meta property="og:description" content="For easier reporting and calculations. Analysis of process data from digital pen, yielding learning style indicators and corresponding behavioural indicators. Derive item parameters, theta scores etc. based on the mirt package. Also including some advanced graph tools and themes.">
<meta property="og:image" content="/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">YQzuoye</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.1.3</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div class="section level1">
<div class="page-header"><h1 id="yqzuoye-">YQzuoye <img src="logo.png" align="right" alt="" width="120"><a class="anchor" aria-label="anchor" href="#yqzuoye-"></a>
</h1></div>
<p>为了更高效的算算算、画画画。</p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://devtools.r-lib.org/reference/remote-reexports.html" class="external-link">install_local</a></span><span class="op">(</span><span class="st">"~/Nutstore Files/17zuoyegit/YQzuoye_0.1.3.tar.gz"</span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">YQzuoye</span><span class="op">)</span></code></pre></div>
</div>
<div class="section level2">
<h2 id="usage">Usage<a class="anchor" aria-label="anchor" href="#usage"></a>
</h2>
<div class="section level3">
<h3 id="irt">IRT<a class="anchor" aria-label="anchor" href="#irt"></a>
</h3>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># 基础irt模型</span>
<span class="fu"><a href="reference/yq_irt.html">yq_irt</a></span><span class="op">(</span><span class="va">input</span><span class="op">)</span>
<span class="co"># input is a list, conclude item dimension information, score data and other configuration information.</span>

<span class="co"># 题目信息量</span>
<span class="fu">teminfox</span><span class="op">(</span><span class="va">Theta</span>,
  <span class="va">it</span>,
  model <span class="op">=</span> <span class="st">"undefined"</span>,
  D <span class="op">=</span> <span class="fl">1</span>,
  total.info <span class="op">=</span> <span class="cn">TRUE</span>
<span class="op">)</span>
<span class="co"># 测验信息量</span>
<span class="fu"><a href="reference/testinfox.html">testinfox</a></span><span class="op">(</span>
  it <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">as.matrix</a></span><span class="op">(</span><span class="va">par.x</span><span class="op">[</span>, <span class="op">-</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span>,
  <span class="va">Theta</span>,
  individual <span class="op">=</span> <span class="cn">FALSE</span>,
  model <span class="op">=</span> <span class="st">"undefined"</span>,
  which.items <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">it</span><span class="op">)</span>
<span class="op">)</span></code></pre></div>
<p>IRT example</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># load score data</span>
<span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">score_mat</span><span class="op">)</span>
<span class="co"># load tag data</span>
<span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">TAG</span><span class="op">)</span>
<span class="va">dim_vector</span> <span class="op">&lt;-</span> <span class="va">TAG</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://rdrr.io/r/stats/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">tag_type</span> <span class="op">==</span> <span class="st">"认知"</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="fu"><a href="reference/to_dim_vector.html">to_dim_vector</a></span><span class="op">(</span>score_data <span class="op">=</span> <span class="va">score_mat</span><span class="op">[</span>,<span class="op">-</span><span class="fl">1</span><span class="op">]</span>,<span class="va">.</span>,<span class="st">'qid'</span>,<span class="st">'dim'</span>,levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">.</span><span class="op">[</span>,<span class="st">'dim'</span><span class="op">]</span><span class="op">)</span><span class="op">)</span>
<span class="co"># load max_score data</span>
<span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">max_score</span><span class="op">)</span>
<span class="co"># make input</span>
<span class="va">input</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>
<span class="va">input</span><span class="op">$</span><span class="va">score_mat</span> <span class="op">&lt;-</span> <span class="va">score_mat</span><span class="op">[</span>,<span class="op">-</span><span class="fl">1</span><span class="op">]</span>
<span class="va">input</span><span class="op">$</span><span class="va">irt_type</span> <span class="op">&lt;-</span> <span class="fl">1</span>
<span class="va">input</span><span class="op">$</span><span class="va">locate_parameter</span> <span class="op">&lt;-</span> <span class="cn">TRUE</span>
<span class="va">input</span><span class="op">$</span><span class="va">calling_count</span> <span class="op">&lt;-</span> <span class="fl">0</span>
<span class="co"># input$item_info$max_score &lt;- max_score</span>
<span class="va">input</span><span class="op">$</span><span class="va">item_info</span><span class="op">$</span><span class="va">dim_vector</span> <span class="op">&lt;-</span> <span class="va">dim_vector</span>
<span class="va">out</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/yq_irt.html">yq_irt</a></span><span class="op">(</span><span class="va">input</span><span class="op">)</span>
<span class="co">#&gt; Warning in yq_irt(input): 未指定题目满分值，将使用作答矩阵中出现的最高分值。</span>
<span class="co">#&gt; Warning in yq_irt(input): 有3道题得分点过多，已强制划分为20个以内的分数段,最低分数区间1分。</span>
<span class="co">#&gt; R process: CTT done.</span>
<span class="co">#&gt;  Start unidimensional irt estimation now : </span>
<span class="co">#&gt; R process: irt done. </span>
<span class="co">#&gt;  Start multidimensional irt estimation now : </span>
<span class="co">#&gt; 维度 1 估计中 </span>
<span class="co">#&gt; 维度 2 估计中 </span>
<span class="co">#&gt; R process: multi irt done.</span>
<span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">out</span><span class="op">)</span>
<span class="co">#&gt; List of 4</span>
<span class="co">#&gt;  $ paper      :List of 2</span>
<span class="co">#&gt;   ..$ irt_reliability: num 0.935</span>
<span class="co">#&gt;   ..$ ctt_reliability: num 0.894</span>
<span class="co">#&gt;  $ item       :List of 5</span>
<span class="co">#&gt;   ..$ itemName : chr [1:44] "Q1" "Q2" "Q3" "Q4" ...</span>
<span class="co">#&gt;   ..$ ctt_alpha: num [1:44] 0.45 0.27 0.845 0.811 0.589 ...</span>
<span class="co">#&gt;   ..$ ctt_beta : num [1:44] 0.892 0.956 0.549 0.896 0.6 ...</span>
<span class="co">#&gt;   ..$ irt_alpha: num [1:44] 1.649 1.611 0.686 0.665 0.418 ...</span>
<span class="co">#&gt;   ..$ irt_beta : num [1:44] -1.937 -2.504 -0.132 -2.138 -1.106 ...</span>
<span class="co">#&gt;  $ theta      :List of 3</span>
<span class="co">#&gt;   ..$ subject_theta   : num [1:345] 1.58 0.531 0.118 -0.833 0.836 ...</span>
<span class="co">#&gt;   ..$ subject_theta_se: num [1:345] 0.408 0.334 0.231 0.251 0.311 ...</span>
<span class="co">#&gt;   ..$ beta_theta_fit  : num [1:345] 0.182 0.176 0.273 0.158 0.227 ...</span>
<span class="co">#&gt;  $ media_theta:List of 2</span>
<span class="co">#&gt;   ..$ : num [1:345] 1.5699 0.4375 0.0753 -0.6825 0.9131 ...</span>
<span class="co">#&gt;   ..$ : num [1:345] 0.714 0.769 0.518 -1.333 0.168 ...</span></code></pre></div>
</div>
<div class="section level3">
<h3 id="增值评价">增值评价<a class="anchor" aria-label="anchor" href="#%E5%A2%9E%E5%80%BC%E8%AF%84%E4%BB%B7"></a>
</h3>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>`2018年-认知` <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">1000</span><span class="op">)</span>, `2019年-认知` <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">1000</span>, <span class="fl">1</span>, <span class="fl">1</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">1000</span><span class="op">)</span>, 学校 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"班级"</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">20</span><span class="op">)</span>, each <span class="op">=</span> <span class="fl">50</span><span class="op">)</span>, dim_name <span class="op">=</span> <span class="st">"认知"</span><span class="op">)</span>
<span class="co"># 增值结果</span>
<span class="va">res</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/hlm_value_added.html">hlm_value_added</a></span><span class="op">(</span><span class="va">data</span>, group <span class="op">=</span> <span class="st">"学校"</span>, pre <span class="op">=</span> <span class="fl">1</span>, after <span class="op">=</span> <span class="fl">2</span>, time <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"2018"</span>, <span class="st">"2019"</span><span class="op">)</span>, dim_name <span class="op">=</span> <span class="st">"认知"</span><span class="op">)</span>
<span class="co">#&gt; boundary (singular) fit: see help('isSingular')</span>

<span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">res</span><span class="op">)</span>
<span class="co">#&gt; List of 1</span>
<span class="co">#&gt;  $ 认知:List of 2</span>
<span class="co">#&gt;   ..$ sch_add:'data.frame':  20 obs. of  4 variables:</span>
<span class="co">#&gt;   .. ..$ 认知.2018.2019.sch_add: num [1:20] 0 0 0 0 0 0 0 0 0 0 ...</span>
<span class="co">#&gt;   .. ..$ 认知.2018.2019.rank   : int [1:20] 16 9 6 17 4 1 19 15 10 13 ...</span>
<span class="co">#&gt;   .. ..$ 认知.2018.2019.q_rank : chr [1:20] "Q1" "Q1" "Q1" "Q1" ...</span>
<span class="co">#&gt;   .. ..$ 认知.2018.2019.merge  : chr [1:20] "0(Q1)" "0(Q1)" "0(Q1)" "0(Q1)" ...</span>
<span class="co">#&gt;   .. ..- attr(*, "postVar")= num [1, 1, 1:20] 1.25e-17 1.25e-17 1.25e-17 1.25e-17 1.25e-17 ...</span>
<span class="co">#&gt;   ..$ per_add:'data.frame':  1000 obs. of  1 variable:</span>
<span class="co">#&gt;   .. ..$ 认知.2018.2019.per_add: num [1:1000] 1.15 1.204 -0.531 -0.227 3.04 ...</span></code></pre></div>
</div>
<div class="section level3">
<h3 id="学习品质">学习品质<a class="anchor" aria-label="anchor" href="#%E5%AD%A6%E4%B9%A0%E5%93%81%E8%B4%A8"></a>
</h3>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># 坚韧性</span>
<span class="fu"><a href="reference/tenacity.html">tenacity</a></span><span class="op">(</span><span class="va">input_data</span>, P <span class="op">=</span> <span class="fl">0.6</span><span class="op">)</span>

<span class="co"># 时间管理</span>
<span class="fu"><a href="reference/time_manage.html">time_manage</a></span><span class="op">(</span><span class="va">input_data</span><span class="op">)</span>

<span class="co"># 专注性</span>
<span class="fu"><a href="reference/concentrate.html">concentrate</a></span><span class="op">(</span><span class="va">input_data</span>, set_time <span class="op">=</span> <span class="cn">T</span><span class="op">)</span>

<span class="co"># 数据清洗</span>
<span class="fu"><a href="reference/check_pen.html">check_pen</a></span><span class="op">(</span><span class="va">data</span><span class="op">)</span> <span class="co"># 检查点阵笔作答时间</span>

<span class="fu"><a href="reference/clean_paper.html">clean_paper</a></span><span class="op">(</span><span class="va">data</span><span class="op">)</span> <span class="co"># 清洗试卷信息表</span>

<span class="fu"><a href="reference/clean_pen.html">clean_pen</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">data</span>,dayinfo <span class="op">=</span> <span class="va">dayinfo</span><span class="op">)</span> <span class="co">#根据作答时间清洗点阵笔数据</span></code></pre></div>
</div>
<div class="section level3">
<h3 id="报告生产工具">报告生产工具<a class="anchor" aria-label="anchor" href="#%E6%8A%A5%E5%91%8A%E7%94%9F%E4%BA%A7%E5%B7%A5%E5%85%B7"></a>
</h3>
<div class="section level4">
<h4 id="数据处理与统计计算">数据处理与统计计算<a class="anchor" aria-label="anchor" href="#%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86%E4%B8%8E%E7%BB%9F%E8%AE%A1%E8%AE%A1%E7%AE%97"></a>
</h4>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">#保留两位便捷函数</span>
<span class="fu"><a href="reference/mean2.html">mean2</a></span><span class="op">(</span><span class="fl">4.5567</span><span class="op">)</span> 
<span class="co">#&gt; [1] 4.56</span>
<span class="fu"><a href="reference/sd2.html">sd2</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">100</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; [1] 0.98</span>
<span class="fu"><a href="reference/cvf.html">cvf</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">100</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; [1] "-969.5%"</span>

<span class="co"># 四舍五入</span>
<span class="fu"><a href="reference/round2.html">round2</a></span><span class="op">(</span><span class="fl">1.25</span>,<span class="fl">1</span><span class="op">)</span>
<span class="co">#&gt; [1] 1.3</span>
<span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="fl">1.25</span>,<span class="fl">1</span><span class="op">)</span>
<span class="co">#&gt; [1] 1.2</span>

<span class="co"># irt之前的重编码数据，使数据从0开始。</span>
<span class="fu"><a href="reference/recode2.html">recode2</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">2</span>,<span class="fl">4</span>,<span class="fl">5</span><span class="op">)</span><span class="op">)</span> 
<span class="co">#&gt; [1] 0 1 2 3</span>

<span class="co"># 归一化</span>
<span class="fu"><a href="reference/scaleone.html">scaleone</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="op">-</span><span class="fl">3</span>,<span class="fl">3</span>,<span class="fl">0.5</span><span class="op">)</span><span class="op">)</span> <span class="co"># x需为z分数</span>
<span class="co">#&gt;  [1] 0.000 0.000 0.000 0.125 0.250 0.375 0.500 0.625 0.750 0.875 1.000 1.000</span>
<span class="co">#&gt; [13] 1.000</span>
<span class="fu"><a href="reference/toone.html">toone</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">10</span><span class="op">)</span><span class="op">)</span> <span class="co"># 任意分数归一化</span>
<span class="co">#&gt;  [1] 0.4119010 0.4784113 0.0000000 0.9039380 0.3851611 0.5196065 0.4290555</span>
<span class="co">#&gt;  [8] 0.6978734 0.4234572 1.0000000</span>

<span class="co"># Z转3等级</span>
<span class="fu"><a href="reference/zto3.html">zto3</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>x1<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="op">-</span><span class="fl">3</span>,<span class="fl">3</span>,<span class="fl">0.5</span><span class="op">)</span>,x2<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="op">-</span><span class="fl">3</span>,<span class="fl">3</span>,<span class="fl">0.5</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="co">#zscore must be a matrix or data.frame</span>
<span class="co">#&gt;       x1   x2  </span>
<span class="co">#&gt;  [1,] "低" "低"</span>
<span class="co">#&gt;  [2,] "低" "低"</span>
<span class="co">#&gt;  [3,] "低" "低"</span>
<span class="co">#&gt;  [4,] "低" "低"</span>
<span class="co">#&gt;  [5,] "低" "低"</span>
<span class="co">#&gt;  [6,] "中" "中"</span>
<span class="co">#&gt;  [7,] "中" "中"</span>
<span class="co">#&gt;  [8,] "中" "中"</span>
<span class="co">#&gt;  [9,] "高" "高"</span>
<span class="co">#&gt; [10,] "高" "高"</span>
<span class="co">#&gt; [11,] "高" "高"</span>
<span class="co">#&gt; [12,] "高" "高"</span>
<span class="co">#&gt; [13,] "高" "高"</span>

<span class="co"># 根据四分位数转4等级</span>
<span class="fu"><a href="reference/torank.html">torank</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="op">-</span><span class="fl">3</span>,<span class="fl">3</span>,<span class="fl">0.1</span><span class="op">)</span><span class="op">)</span> <span class="co"># input_data is a vector</span>
<span class="co">#&gt;  [1] 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 3 3 3 3 3 3 3</span>
<span class="co">#&gt; [39] 3 3 3 3 3 3 3 3 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4</span>

<span class="co"># outlier处理</span>
<span class="fu"><a href="reference/cap_outlier.html">cap_outlier</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="op">-</span><span class="fl">3</span>,<span class="fl">3</span>,<span class="fl">0.1</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt;  [1] -2.994 -2.900 -2.800 -2.700 -2.600 -2.500 -2.400 -2.300 -2.200 -2.100</span>
<span class="co">#&gt; [11] -2.000 -1.900 -1.800 -1.700 -1.600 -1.500 -1.400 -1.300 -1.200 -1.100</span>
<span class="co">#&gt; [21] -1.000 -0.900 -0.800 -0.700 -0.600 -0.500 -0.400 -0.300 -0.200 -0.100</span>
<span class="co">#&gt; [31]  0.000  0.100  0.200  0.300  0.400  0.500  0.600  0.700  0.800  0.900</span>
<span class="co">#&gt; [41]  1.000  1.100  1.200  1.300  1.400  1.500  1.600  1.700  1.800  1.900</span>
<span class="co">#&gt; [51]  2.000  2.100  2.200  2.300  2.400  2.500  2.600  2.700  2.800  2.900</span>
<span class="co">#&gt; [61]  2.994</span>

<span class="co"># 百分等级</span>
<span class="fu"><a href="reference/percentile_rank.html">percentile_rank</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="op">-</span><span class="fl">3</span>,<span class="fl">3</span>,<span class="fl">0.1</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt;  [1]  0.8196721  2.4590164  4.0983607  5.7377049  7.3770492  9.0163934</span>
<span class="co">#&gt;  [7] 10.6557377 12.2950820 13.9344262 15.5737705 17.2131148 18.8524590</span>
<span class="co">#&gt; [13] 20.4918033 22.1311475 23.7704918 25.4098361 27.0491803 28.6885246</span>
<span class="co">#&gt; [19] 30.3278689 31.9672131 33.6065574 35.2459016 36.8852459 38.5245902</span>
<span class="co">#&gt; [25] 40.1639344 41.8032787 43.4426230 45.0819672 46.7213115 48.3606557</span>
<span class="co">#&gt; [31] 50.0000000 51.6393443 53.2786885 54.9180328 56.5573770 58.1967213</span>
<span class="co">#&gt; [37] 59.8360656 61.4754098 63.1147541 64.7540984 66.3934426 68.0327869</span>
<span class="co">#&gt; [43] 69.6721311 71.3114754 72.9508197 74.5901639 76.2295082 77.8688525</span>
<span class="co">#&gt; [49] 79.5081967 81.1475410 82.7868852 84.4262295 86.0655738 87.7049180</span>
<span class="co">#&gt; [55] 89.3442623 90.9836066 92.6229508 94.2622951 95.9016393 97.5409836</span>
<span class="co">#&gt; [61] 99.1803279</span>

<span class="co"># 几何平均数</span>
<span class="fu"><a href="reference/geom_mean.html">geom_mean</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">40</span>,<span class="fl">52</span>,<span class="fl">65</span>,<span class="fl">75</span>,<span class="fl">86</span>,<span class="fl">97</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; [1] 1.19383</span>
<span class="co"># same as:</span>
<span class="fu">psych</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/psych/man/geometric.mean.html" class="external-link">geometric.mean</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1.3</span>,<span class="fl">1.25</span>,<span class="fl">1.154</span>,<span class="fl">1.147</span>,<span class="fl">1.128</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; [1] 1.193951</span>

<span class="fu"><a href="reference/geom_mean.html">geom_mean</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>d1<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">40</span>,<span class="fl">52</span>,<span class="fl">65</span>,<span class="fl">75</span>,<span class="fl">86</span>,<span class="fl">97</span><span class="op">)</span>,d2<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">40</span>,<span class="fl">52</span>,<span class="fl">65</span>,<span class="fl">75</span>,<span class="fl">86</span>,<span class="fl">97</span><span class="op">)</span><span class="op">)</span>,by_row<span class="op">=</span><span class="cn">F</span><span class="op">)</span>
<span class="co">#&gt;      d1      d2 </span>
<span class="co">#&gt; 1.19383 1.19383</span></code></pre></div>
</div>
<div class="section level4">
<h4 id="画图工具">画图工具<a class="anchor" aria-label="anchor" href="#%E7%94%BB%E5%9B%BE%E5%B7%A5%E5%85%B7"></a>
</h4>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"班级"</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">)</span>, y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">0</span>, <span class="fl">5</span><span class="op">)</span><span class="op">)</span>
<span class="co"># 增值量柱状图</span>
<span class="fu"><a href="reference/bar_1.html">bar_1</a></span><span class="op">(</span><span class="va">data</span><span class="op">)</span> <span class="op">+</span> <span class="fu">theme_bw</span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p><img src="README_files/figure-gfm/unnamed-chunk-8-1.png"><!-- --></p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># macbook needs to set font style</span>
<span class="fu"><a href="reference/fontset.html">fontset</a></span><span class="op">(</span><span class="op">)</span>
<span class="fu"><a href="reference/bar_1.html">bar_1</a></span><span class="op">(</span><span class="va">data</span><span class="op">)</span> <span class="op">+</span> <span class="fu">theme_bw</span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p><img src="README_files/figure-gfm/unnamed-chunk-8-2.png"><!-- --></p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"坚韧性"</span>, <span class="st">"专注性"</span>, <span class="st">"时间管理"</span><span class="op">)</span>, y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">10</span>, <span class="fl">5</span><span class="op">)</span><span class="op">)</span>
<span class="co"># 普通柱状图</span>
<span class="fu"><a href="reference/bar_2.html">bar_2</a></span><span class="op">(</span><span class="va">data</span><span class="op">)</span> <span class="op">+</span> <span class="fu">theme_bw</span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p><img src="README_files/figure-gfm/unnamed-chunk-9-1.png"><!-- --></p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># 带误差线的柱状图</span>

<span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">bar_data</span><span class="op">)</span>
<span class="co"># 分面柱形图</span>
<span class="fu"><a href="reference/bar_error.html">bar_error</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">dat_p</span>, x <span class="op">=</span> <span class="st">"等级"</span>, xname <span class="op">=</span> <span class="st">"坚韧性等级"</span>, yname <span class="op">=</span> <span class="st">"作业平均得分率"</span>, facet_rows <span class="op">=</span> <span class="st">"facet"</span><span class="op">)</span> <span class="op">+</span> <span class="fu">theme_bw</span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p><img src="README_files/figure-gfm/unnamed-chunk-10-1.png"><!-- --></p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># 更换颜色</span>
<span class="fu"><a href="reference/bar_error.html">bar_error</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">dat_p</span>, x <span class="op">=</span> <span class="st">"等级"</span>, xname <span class="op">=</span> <span class="st">"坚韧性等级"</span>, yname <span class="op">=</span> <span class="st">"作业平均得分率"</span>, group <span class="op">=</span> <span class="cn">NULL</span>, fill_color <span class="op">=</span> <span class="st">"#DEA9CC"</span>, facet_rows <span class="op">=</span> <span class="st">"facet"</span><span class="op">)</span> <span class="op">+</span> <span class="fu">theme_bw</span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p><img src="README_files/figure-gfm/unnamed-chunk-10-2.png"><!-- --></p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># 根据年级分组，根据年级填色</span>
<span class="fu"><a href="reference/bar_error.html">bar_error</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">dat_p</span>, x <span class="op">=</span> <span class="st">"等级"</span>, xname <span class="op">=</span> <span class="st">"坚韧性等级"</span>, yname <span class="op">=</span> <span class="st">"作业平均得分率"</span>, group <span class="op">=</span> <span class="va">dat_p</span><span class="op">$</span><span class="va">年级</span>, fill_color <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"#009B9F"</span>, <span class="st">"#DEA9CC"</span><span class="op">)</span>, facet_rows <span class="op">=</span> <span class="st">"facet"</span><span class="op">)</span> <span class="op">+</span> <span class="fu">theme_bw</span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p><img src="README_files/figure-gfm/unnamed-chunk-10-3.png"><!-- --></p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># 按年级分组，按年级填色，按学科分面</span>
<span class="fu"><a href="reference/bar_error.html">bar_error</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">dat_p</span>, x <span class="op">=</span> <span class="st">"等级"</span>, xname <span class="op">=</span> <span class="st">"坚韧性等级"</span>, yname <span class="op">=</span> <span class="st">"作业平均得分率"</span>, group <span class="op">=</span> <span class="va">dat_p</span><span class="op">$</span><span class="va">年级</span>, fill_color <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"#009B9F"</span>, <span class="st">"#DEA9CC"</span><span class="op">)</span>, facet_rows <span class="op">=</span> <span class="st">"学科"</span><span class="op">)</span> <span class="op">+</span> <span class="fu">theme_bw</span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p><img src="README_files/figure-gfm/unnamed-chunk-10-4.png"><!-- --></p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">#'</span></code></pre></div>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># 折线图</span>
<span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>作业顺序_ <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2018</span><span class="op">:</span><span class="fl">2020</span><span class="op">)</span>, <span class="fl">3</span><span class="op">)</span>, IRT均值 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">9</span>, <span class="fl">10</span>, <span class="fl">5</span><span class="op">)</span>, 班级 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"班级"</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">)</span>, each <span class="op">=</span> <span class="fl">3</span><span class="op">)</span><span class="op">)</span>
<span class="fu"><a href="reference/line_dot_1.html">line_dot_1</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">data</span>, x <span class="op">=</span> <span class="st">"作业顺序_"</span>, y <span class="op">=</span> <span class="st">"IRT均值"</span>, group <span class="op">=</span> <span class="st">"班级"</span>, title <span class="op">=</span> <span class="st">""</span>, ytitle <span class="op">=</span> <span class="st">"IRT均值"</span>, xtitle <span class="op">=</span> <span class="st">"作业次数"</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="reference/theme_plot1.html">theme_plot1</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p><img src="README_files/figure-gfm/unnamed-chunk-11-1.png"><!-- --></p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># 普通横向堆积条形图</span>
<span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">plot_dat</span><span class="op">)</span>
<span class="va">dat</span> <span class="op">&lt;-</span> <span class="va">stack_plot_dat</span>
<span class="co"># 不需要拉线</span>
<span class="fu"><a href="reference/stack_plot.html">stack_plot</a></span><span class="op">(</span>
  data <span class="op">=</span> <span class="va">dat</span>, y <span class="op">=</span> <span class="va">dat</span><span class="op">$</span><span class="va">率</span>,
  x <span class="op">=</span> <span class="va">dat</span><span class="op">$</span><span class="va">班级</span>, label <span class="op">=</span> <span class="va">dat</span><span class="op">$</span><span class="va">率x</span>, fill <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">dat</span><span class="op">$</span><span class="va">标签</span><span class="op">)</span>, facet_rows <span class="op">=</span> <span class="st">"维度"</span>
<span class="op">)</span> <span class="op">+</span> <span class="fu">theme_light</span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p><img src="README_files/figure-gfm/unnamed-chunk-12-1.png"><!-- --></p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># 如果需要拉线，则需增加累积值这一列数据</span>
<span class="va">dat</span><span class="op">$</span><span class="va">率</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fl">0.01</span>
<span class="va">dat</span><span class="op">$</span><span class="va">率</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fl">0.02</span>
<span class="va">dat</span><span class="op">$</span><span class="va">率</span><span class="op">[</span><span class="fl">4</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fl">0.025</span>

<span class="va">dat</span> <span class="op">&lt;-</span> <span class="va">dat</span> <span class="op">%&gt;%</span>
  <span class="fu">group_by</span><span class="op">(</span><span class="va">班级</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">mutate</span><span class="op">(</span>累积值 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/cumsum.html" class="external-link">cumsum</a></span><span class="op">(</span><span class="va">率</span><span class="op">)</span><span class="op">)</span>
<span class="fu"><a href="reference/stack_plot.html">stack_plot</a></span><span class="op">(</span>
  data <span class="op">=</span> <span class="va">dat</span>, y <span class="op">=</span> <span class="va">dat</span><span class="op">$</span><span class="va">率</span>,
  x <span class="op">=</span> <span class="va">dat</span><span class="op">$</span><span class="va">班级</span>, label <span class="op">=</span> <span class="va">dat</span><span class="op">$</span><span class="va">率x</span>, fill <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">dat</span><span class="op">$</span><span class="va">标签</span><span class="op">)</span>, facet_rows <span class="op">=</span> <span class="st">"维度"</span>, low_line <span class="op">=</span> <span class="cn">T</span>
<span class="op">)</span> <span class="op">+</span>
  <span class="fu">theme_bw</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">coord_flip</span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt; Warning: Removed 3 rows containing missing values (geom_text).</span>
<span class="co">#&gt; Warning: Removed 81 rows containing missing values (geom_text_repel).</span></code></pre></div>
<p><img src="README_files/figure-gfm/unnamed-chunk-12-2.png"><!-- --></p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># 垂直D等级分界-堆积条形图</span>
<span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">plot_dat</span><span class="op">)</span>
<span class="va">dat</span> <span class="op">&lt;-</span> <span class="va">stack_plot_dat</span>
<span class="fu"><a href="reference/stack_plot_cut.html">stack_plot_cut</a></span><span class="op">(</span>
  data <span class="op">=</span> <span class="va">dat</span>, y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">dat</span><span class="op">$</span><span class="va">标签</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"1"</span><span class="op">)</span>, <span class="op">-</span><span class="va">dat</span><span class="op">$</span><span class="va">率</span>, <span class="va">dat</span><span class="op">$</span><span class="va">率</span><span class="op">)</span>,
  x <span class="op">=</span> <span class="va">dat</span><span class="op">$</span><span class="va">班级</span>, label <span class="op">=</span> <span class="va">dat</span><span class="op">$</span><span class="va">率x</span>, fill <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">dat</span><span class="op">$</span><span class="va">标签</span><span class="op">)</span>, facet_rows <span class="op">=</span> <span class="st">"维度"</span>
<span class="op">)</span> <span class="op">+</span> <span class="fu">theme_bw</span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p><img src="README_files/figure-gfm/unnamed-chunk-13-1.png"><!-- --></p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># 水平D等级分界-堆积条形图</span>
<span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">plot_dat</span><span class="op">)</span>
<span class="va">dat</span> <span class="op">&lt;-</span> <span class="va">stack_plot_dat</span>
<span class="fu"><a href="reference/stack_plot_cut_v.html">stack_plot_cut_v</a></span><span class="op">(</span>
  data <span class="op">=</span> <span class="va">dat</span>, y <span class="op">=</span> <span class="va">dat</span><span class="op">$</span><span class="va">班级</span>,
  x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">dat</span><span class="op">$</span><span class="va">标签</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"1"</span><span class="op">)</span>, <span class="op">-</span><span class="va">dat</span><span class="op">$</span><span class="va">率</span>, <span class="va">dat</span><span class="op">$</span><span class="va">率</span><span class="op">)</span>, label <span class="op">=</span> <span class="va">dat</span><span class="op">$</span><span class="va">率x</span>, fill <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">dat</span><span class="op">$</span><span class="va">标签</span><span class="op">)</span>, facet_rows <span class="op">=</span> <span class="st">"维度"</span>
<span class="op">)</span> <span class="op">+</span> <span class="fu">theme_bw</span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p><img src="README_files/figure-gfm/unnamed-chunk-14-1.png"><!-- --></p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># 换一种样式</span>
<span class="fu"><a href="reference/stack_plot_cut_v.html">stack_plot_cut_v</a></span><span class="op">(</span>
  data <span class="op">=</span> <span class="va">dat</span>, y <span class="op">=</span> <span class="va">dat</span><span class="op">$</span><span class="va">班级</span>,
  x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">dat</span><span class="op">$</span><span class="va">标签</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"1"</span><span class="op">)</span>, <span class="op">-</span><span class="va">dat</span><span class="op">$</span><span class="va">率</span>, <span class="va">dat</span><span class="op">$</span><span class="va">率</span><span class="op">)</span>, label <span class="op">=</span> <span class="va">dat</span><span class="op">$</span><span class="va">率x</span>, fill <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">dat</span><span class="op">$</span><span class="va">标签</span><span class="op">)</span>, facet_rows <span class="op">=</span> <span class="st">"维度"</span>
<span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="reference/theme_plot1.html">theme_plot1</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p><img src="README_files/figure-gfm/unnamed-chunk-14-2.png"><!-- --></p>
</div>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing YQzuoye</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Juan Liu <br><small class="roles"> Maintainer </small>  </li>
</ul>
</div>



  </div>
</div>


      <footer><div class="copyright">
  <p></p>
<p>Developed by Juan Liu.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.4.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
